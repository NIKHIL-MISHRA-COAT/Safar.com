<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./css/admin.css" />
  <link rel="stylesheet" href="./css/table.css" />
  <link rel="stylesheet" href="./css/deletebutton.css" />
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
  <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css">
  <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
  <title>Admin Panel</title>
</head>
<body>

  <!-- Sidebar Navigation -->
  <nav>
    <div class="logo-name">
      <div class="logo-image">
        <img src="images/logo.png" alt />
      </div>
      <span class="logo_name">Safar.com</span>
    </div>
    <div class="menu-items">
      <ul class="nav-links">
        <li><a href="./adminDashboard.html"><i class="uil uil-estate"></i><span class="link-name">Dashboard</span></a></li>
        <li><a href="./adminUsers.html"><i class="fi fi-rs-user"></i><span class="link-name">Users</span></a></li>
        <li><a href="./adminBuses.html"><i class="fi fi-rr-bus"></i><span class="link-name">Buses</span></a></li>
        <li><a href="./adminReservation.html"><i class="fi fi-rr-memo-circle-check"></i><span class="link-name">Reservations</span></a></li>
        <li><a href="./adminfeedback.html"><i class="fi fi-rr-smiley-comment-alt"></i><span class="link-name">FeedBacks</span></a></li>
        <li><a href="./adminRoutes.html"><i class="fi fi-rs-route"></i><span class="link-name">Routes</span></a></li>
      </ul>
      <ul class="logout-mode">
        <li><a id="popupButton"><i class="uil uil-signout"></i><span class="link-name">Logout</span></a></li>
        <li class="mode">
          <a><i class="uil uil-moon"></i><span class="link-name">Dark Mode</span></a>
          <div class="mode-toggle"><span class="switch"></span></div>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Section -->
  <section class="dashboard">
    <div class="top">
      <i class="uil uil-bars sidebar-toggle"></i>
    </div>

    <!-- Logout Confirmation -->
    <div class="popup" id="popupMessage">
      <span class="close" onclick="closePopup()">&times;</span>
      <p>Are you sure you want to sign out?</p>
      <button id="signout">Logout</button>
    </div>

    <!-- Dashboard Content -->
    <div class="dash-content">
      <div class="overview">
        <div class="title">
          <i class="fi fi-rs-bus-alt"></i>
          <span class="text">Buses</span>
        </div>

        <!-- Add Bus Button -->
        <div style="margin: 15px 0;">
          <button id="openBusForm" style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer;">Add Bus</button>
        </div>

        <!-- Add Bus Modal -->
        <div id="busFormModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
          <div style="background:#fff; padding:25px 30px; border-radius:10px; width:400px; position:relative;">
            <span id="closeBusForm" style="position:absolute; top:10px; right:15px; font-size:20px; cursor:pointer;">&times;</span>
            <h3 style="margin-bottom: 15px;">Add Bus Details</h3>
            <form id="busForm">
              <input type="text" name="busName" placeholder="Bus Name" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="text" name="driverName" placeholder="Driver Name" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="text" name="routeFrom" placeholder="From" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="text" name="routeTo" placeholder="To" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="date" name="busJourneyDate" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="time" name="departureTime" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="number" name="seats" placeholder="Total Seats" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <input type="number" name="fare" placeholder="Fare" required style="width:100%; padding:8px; margin:6px 0;"><br>
              <button type="submit" style="background:#4CAF50; color:white; padding:10px; border:none; width:100%; border-radius:5px;">Add Bus</button>
            </form>
          </div>
        </div>

        <!-- Table of Buses -->
        <div class="field" id="field">
          <table>
            <thead>
              <tr class="table100-head">
                <th class="column1">Bus Id</th>
                <th class="column2">Bus Name</th>
                <th class="column3">Driver Name</th>
                <th class="column4">From</th>
                <th class="column5">To</th>
                <th class="column5">Journery Date</th>
                <th class="column6">Departure</th>
                <th class="column6">Seats</th>
                <th class="column7">Fare</th>
                <th class="column8" style="padding-right: 30px;">Delete</th>
              </tr>
            </thead>
            <tbody class="UserData">
              <!-- Data goes here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Scripts -->
  <script src="./js/adminLogout.js"></script>
  <script src="./js/adminBuses.js"></script>
  <script src="./js/modeToggle.js"></script>
  <script>
    // Modal control
    const openBtn = document.getElementById("openBusForm");
    const modal = document.getElementById("busFormModal");
    const closeBtn = document.getElementById("closeBusForm");

    openBtn.onclick = () => modal.style.display = "flex";
    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

    // Submit handler
    document.getElementById("busForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      const data = {
        busName: formData.get("busName"),
        driverName: formData.get("driverName"),
        busType: "AC",
        routeFrom: formData.get("routeFrom"),
        routeTo: formData.get("routeTo"),
        busJourneyDate: formData.get("busJourneyDate"),
        arrivalTime: "10:00:00",
        departureTime: formData.get("departureTime"),
        seats: Number(formData.get("seats")),
        availableSeats: Number(formData.get("seats")),
        fare: Number(formData.get("fare")),
        route: {
          routeFrom: formData.get("routeFrom"),
          routeTo: formData.get("routeTo"),
          distance: 1000
        }
      };

      
    });
  </script>
</body>
</html>
